<% const height = rates.length === 1 ? 258 : 323 %>

<svg width="320" height="<%= height %>" viewBox="0 0 320 <%= height %>" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect x="0.5" y="0.5" width="319" height="<%= height -1 %>" fill="white" />
  <rect x="0.5" y="0.5" width="319" height="<%= height -1 %>" stroke="#E5E5E5" />
  <rect width="320" height="106" fill="#F5F5FE" />

  <text
    fill="#3A3A3A"
    xml:space="preserve"
    style="white-space: pre"
    font-family="Marianne"
    font-size="20"
    font-weight="bold"
    letter-spacing="0em"
  >
    <tspan x="20" y="37.75">Que deviennent les</tspan>
    <tspan x="20" y="61.75">apprenants apr&#xe8;s cette</tspan>
    <tspan x="20" y="85.75">formation ?</tspan>
  </text>

  <!-- first block starts here -->
  <g class="<%= rates[0].level %>">
    <rect x="30" y="144" width="90" height="35" rx="4" class="bg" />

    <g transform="translate(40,154)"><%- await include(`../assets/${rates[0].level}-icon.svg.ejs`); %></g>

    <text
      class="label"
      xml:space="preserve"
      style="white-space: pre"
      font-family="Marianne"
      font-size="25"
      font-weight="bold"
      letter-spacing="0em"
    >
      <tspan x="59" y="172.438"><%= rates[0].rate %>%</tspan>
    </text>
    <text
      fill="#3A3A3A"
      xml:space="preserve"
      style="white-space: pre"
      font-family="Marianne"
      font-size="14"
      letter-spacing="0em"
    >
      <% if(rates[0].labels.length === 1) { %>
      <tspan x="130" y="167.125"><%= rates[0].labels[0] %></tspan>
      <% } else { %>
      <tspan x="130" y="157.125"><%= rates[0].labels[0] %></tspan>
      <tspan x="130" y="177.125"><%= rates[0].labels[1] %></tspan>
      <% } %>
    </text>
  </g>
  <!-- end first block -->

  <!-- second block starts here -->
  <% if(rates.length > 1) { %>
  <g class="<%= rates[1].level %>">
    <rect x="30" y="209" width="90" height="35" rx="4" class="bg" />

    <g transform="translate(40,219)"><%- await include(`../assets/${rates[1].level}-icon.svg.ejs`); %></g>

    <text
      class="label"
      xml:space="preserve"
      style="white-space: pre"
      font-family="Marianne"
      font-size="25"
      font-weight="bold"
      letter-spacing="0em"
    >
      <tspan x="57.5" y="237.438"><%= rates[1].rate %>%</tspan>
    </text>

    <text
      fill="#3A3A3A"
      xml:space="preserve"
      style="white-space: pre"
      font-family="Marianne"
      font-size="14"
      letter-spacing="0em"
    >
      <% if(rates[1].labels.length === 1) { %>
      <tspan x="130" y="233.125"><%= rates[1].labels[0] %></tspan>
      <% } else { %>
      <tspan x="130" y="223.125"><%= rates[1].labels[0] %></tspan>
      <tspan x="130" y="243.125"><%= rates[1].labels[1] %></tspan>
      <% } %>
    </text>
  </g>
  <% } %>

  <text
    fill="#3A3A3A"
    xml:space="preserve"
    style="white-space: pre"
    font-family="Marianne"
    font-size="11"
    font-style="italic"
    letter-spacing="0em"
  >
    <tspan x="30" y="<%= height - 34 %>">Chiffres issus du site InserJeunes</tspan>
  </text>

  <defs>
    <style type="text/css">
      @font-face {
        font-family: "Marianne";
        src: url("data:font/truetype;charset=utf-8;base64,<%= base64Font %>") format("woff");
        font-weight: 500;
        font-style: normal;
        font-display: swap;
      }
      .success .bg {
        fill: #b8fec9;
      }
      .success .label {
        fill: #18753c;
      }
      .info .bg {
        fill: #e8edff;
      }
      .info .label {
        fill: #0063cb;
      }
      .danger .bg {
        fill: #ffe9e9;
      }
      .danger .label {
        fill: #ce0500;
      }
      .warning .bg {
        fill: #feecc2;
      }
      .warning .label {
        fill: #716043;
      }
    </style>
  </defs>
</svg>
