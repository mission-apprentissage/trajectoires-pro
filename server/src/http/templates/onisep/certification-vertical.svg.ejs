<% const height = rates.length === 1 ? 258 : 323 %>

<svg
  width="320"
  height="<%= height %>"
  viewBox="0 0 320 <%= height %>"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
>
  <% if(meta.title) { %>
  <title><%= meta.title %></title>
  <% } %> <% if(meta.description) { %>
  <desc><%= meta.description%></desc>
  <% } %>
  <rect x="2" y="2" width="316" height="<%= height -4 %>" fill="white" stroke="#FFD400" stroke-width="4" />

  <text
    fill="#3A3A3A"
    xml:space="preserve"
    style="white-space: pre"
    font-family="Expressway Free"
    font-size="26"
    font-weight="bold"
    letter-spacing="0em"
  >
    <tspan x="32" y="48.668">Que deviennent les</tspan>
    <tspan x="32" y="72.668">apprenants apr&#xe8;s cette</tspan>
    <tspan x="32" y="96.668">formation ?</tspan>
  </text>

  <!-- first block starts here -->
  <g>
    <rect x="29" y="144" width="90" height="35" rx="4" fill="#0D7B92" />
    <text
      fill="white"
      xml:space="preserve"
      style="white-space: pre"
      font-family="Expressway Free"
      font-size="25"
      font-weight="bold"
      letter-spacing="0em"
    >
      <tspan x="48" y="172.438"><%= rates[0].rate %>%</tspan>
    </text>
    <text
      fill="black"
      xml:space="preserve"
      style="white-space: pre"
      font-family="Expressway Free"
      font-size="14"
      letter-spacing="0em"
    >
      <% if(rates[0].labels.length===1) { %>
      <tspan x="129" y="167.334"><%= rates[0].labels[0] %></tspan>
      <% } else { %>
      <tspan x="129" y="157.334"><%= rates[0].labels[0] %></tspan>
      <tspan x="129" y="177.334"><%= rates[0].labels[1] %></tspan>
      <% } %>
    </text>
  </g>
  <!-- end first block -->

  <!-- second block starts here -->
  <% if(rates.length > 1) { %>
  <g>
    <rect x="29" y="209" width="90" height="35" rx="4" fill="#0D7B92" />
    <text
      fill="white"
      xml:space="preserve"
      style="white-space: pre"
      font-family="Expressway Free"
      font-size="25"
      font-weight="bold"
      letter-spacing="0em"
    >
      <tspan x="48" y="237.438"><%= rates[1].rate %>%</tspan>
    </text>
    <text
      fill="black"
      xml:space="preserve"
      style="white-space: pre"
      font-family="Expressway Free"
      font-size="14"
      letter-spacing="0em"
    >
      <% if(rates[1].labels.length === 1) { %>
      <tspan x="129" y="233.334"><%= rates[1].labels[0] %></tspan>
      <% } else { %>
      <tspan x="129" y="223.334"><%= rates[1].labels[0] %></tspan>
      <tspan x="129" y="243.334"><%= rates[1].labels[1] %></tspan>
      <% } %>
    </text>
  </g>
  <% } %>
  <!-- end second block -->

  <text
    fill="#3A3A3A"
    xml:space="preserve"
    style="white-space: pre"
    font-family="Expressway Free"
    font-size="11"
    font-style="italic"
    letter-spacing="0em"
  >
    <tspan x="30" y="<%= height - 34 %>">Chiffres issus du site InserJeunes</tspan>
  </text>

  <defs>
    <style>
      @import url("https://fonts.cdnfonts.com/css/expressway-free");
    </style>
  </defs>
</svg>
