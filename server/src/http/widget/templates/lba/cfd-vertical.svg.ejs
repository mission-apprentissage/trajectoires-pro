<%- await include('variables'); %>
<%_
height=region ? 620 : 600

deltaWidth=318
blocksWidth = (exist.pro && exist.apprentissage ? 2 : 1) * deltaWidth
width=blocksWidth + 20
-%>

<svg width="<%= width %>" height="<%= height %>" viewBox="0 0 <%= width %> <%= height %>" fill="none" xmlns="http://www.w3.org/2000/svg">
  <%- await include('../common/description'); %>
  <%- await include('common'); %>

  <% if (region) { %>
  <g class="region">
    <svg x="0" y="10">
      <text>
        <tspan x="0" y="15"><%= regionDesc[0] %> <%= regionDesc[1] %></tspan>
      </text>
    </svg>
  </g>
  <% } %>
  <g class="blocks">
    <svg <% if (region) { %>y="40" <% } %>>
      <% if (exist.pro) { %>
      <% if (hasPro ) { %>
      <g class="filiere">
        <text>
          <tspan x="0" y="15"><%= filiereProDesc %></tspan>
        </text>
      </g>
      <g class="block">
        <svg x="0" y="25" class="block">
          <rect width="308" height="170" />
          <% if (stats?.pro.taux_en_formation) { %>
          <text class="number">
            <tspan x="154" y="55"><%= stats?.pro.taux_en_formation?.valeur %>%</tspan>
          </text>
          <text class="description">
            <tspan x="154" y="90"><%= description_en_formation %></tspan>
          </text>
          <text class="details">
            <tspan x="154" y="115"><%= details_en_formation[0] %></tspan>
            <tspan x="154" y="135"><%= details_en_formation[1] %></tspan>
          </text>
          <% } else { %>
          <text class="description">
            <tspan x="154" y="55"><%= unavailable_en_formation_split[0] %></tspan>
            <tspan x="154" y="75"><%= unavailable_en_formation_split[1] %></tspan>
            <tspan x="154" y="95"><%= unavailable_en_formation_split[2] %></tspan>
            <tspan x="154" y="115"><%= unavailable_en_formation_split[3] %></tspan>
          </text>
          <% }%>
        </svg>

        <svg x="0" y="205" class="block">
          <rect width="308" height="170" />
          <% if (stats?.pro.taux_en_emploi_6_mois) { %>
          <text class="number">
            <tspan x="154" y="55"><%= stats?.pro.taux_en_emploi_6_mois?.valeur %>%</tspan>
          </text>
          <text class="description">
            <tspan x="154" y="90"><%= description_en_emploi_6_mois_override %></tspan>
          </text>
          <text class="details">
            <tspan x="154" y="115"><%= details_en_emploi_6_mois %></tspan>
          </text>
          <% } else { %>
          <text class="description">
            <tspan x="154" y="65"><%= unavailable_en_emploi_6_mois_split[0] %></tspan>
            <tspan x="154" y="85"><%= unavailable_en_emploi_6_mois_split[1] %></tspan>
            <tspan x="154" y="105"><%= unavailable_en_emploi_6_mois_split[2] %></tspan>
          </text>
          <% }%>
        </svg>

        <svg x="0" y="385" class="block">
          <rect width="308" height="170" />
          <% if (stats?.pro.taux_autres_6_mois) { %>
          <text class="number">
            <tspan x="154" y="55"><%= stats?.pro.taux_autres_6_mois?.valeur %>%</tspan>
          </text>
          <text class="description">
            <tspan x="154" y="90"><%= description_autres_6_mois_override %></tspan>
          </text>
          <text class="details">
            <tspan x="154" y="115"><%= details_autres_6_mois_split[0] %></tspan>
            <tspan x="154" y="135"><%= details_autres_6_mois_split[1] %></tspan>
            <tspan x="154" y="155"><%= details_autres_6_mois_split[2] %></tspan>
          </text>
          <% } else { %>
          <text class="description">
            <tspan x="154" y="65"><%= unavailable_autres_6_mois_split[0] %></tspan>
            <tspan x="154" y="85"><%= unavailable_autres_6_mois_split[1] %></tspan>
            <tspan x="154" y="105"><%= unavailable_autres_6_mois_split[2] %></tspan>
          </text>
          <% }%>
        </svg>
      </g>
      <% } else { %>
      <g class="filiere">
        <text>
          <tspan x="0" y="15"><%= filiereProDesc %></tspan>
        </text>
      </g>
      <g class="block">
        <svg x="0" y="25" class="block">
          <rect width="308" height="170" />
          <text class="description">
            <tspan x="154" y="65"><%= unavailablePro.substr(0, 30) %></tspan>
            <tspan x="154" y="85"><%= unavailablePro.substr(30, 26) %></tspan>
            <tspan x="154" y="105"><%= unavailablePro.substr(56) %></tspan>
          </text>
        </svg>
      </g>
      <% } %>
      <% } %>

      <% if (exist.apprentissage) { %>
      <svg x="<%= exist.pro ? 330 : 0 %>">
        <% if (hasApprentissage ) { %>
        <g class="filiere">
          <text>
            <tspan x="0" y="15"><%= filiereApprentissageDesc %></tspan>
          </text>
        </g>
        <g class="block">
          <svg x="0" y="25" class="block">
            <rect width="308" height="170" />
            <% if (stats?.apprentissage.taux_en_formation) { %>
            <text class="number">
              <tspan x="154" y="55"><%= stats?.apprentissage.taux_en_formation?.valeur %>%</tspan>
            </text>
            <text class="description">
              <tspan x="154" y="90"><%= description_en_formation %></tspan>
            </text>
            <text class="details">
              <tspan x="154" y="115"><%= details_en_formation[0] %></tspan>
              <tspan x="154" y="135"><%= details_en_formation[1] %></tspan>
            </text>
            <% } else { %>
            <text class="description">
              <tspan x="154" y="55"><%= unavailable_en_formation_split[0] %></tspan>
              <tspan x="154" y="75"><%= unavailable_en_formation_split[1] %></tspan>
              <tspan x="154" y="95"><%= unavailable_en_formation_split[2] %></tspan>
              <tspan x="154" y="115"><%= unavailable_en_formation_split[3] %></tspan>
            </text>
            <% }%>
          </svg>

          <svg x="0" y="205" class="block">
            <rect width="308" height="170" />
            <% if (stats?.apprentissage.taux_en_emploi_6_mois) { %>
            <text class="number">
              <tspan x="154" y="55"><%= stats?.apprentissage.taux_en_emploi_6_mois?.valeur %>%</tspan>
            </text>
            <text class="description">
              <tspan x="154" y="90"><%= description_en_emploi_6_mois_override %></tspan>
            </text>
            <text class="details">
              <tspan x="154" y="115"><%= details_en_emploi_6_mois %></tspan>
            </text>
            <% } else { %>
            <text class="description">
              <tspan x="154" y="65"><%= unavailable_en_emploi_6_mois_split[0] %></tspan>
              <tspan x="154" y="85"><%= unavailable_en_emploi_6_mois_split[1] %></tspan>
              <tspan x="154" y="105"><%= unavailable_en_emploi_6_mois_split[2] %></tspan>
            </text>
            <% }%>
          </svg>

          <svg x="0" y="385" class="block">
            <rect width="308" height="170" />
            <% if (stats?.apprentissage.taux_autres_6_mois) { %>
            <text class="number">
              <tspan x="154" y="55"><%= stats?.apprentissage.taux_autres_6_mois?.valeur %>%</tspan>
            </text>
            <text class="description">
              <tspan x="154" y="90"><%= description_autres_6_mois_override %></tspan>
            </text>
            <text class="details">
              <tspan x="154" y="115"><%= details_autres_6_mois_split[0] %></tspan>
              <tspan x="154" y="135"><%= details_autres_6_mois_split[1] %></tspan>
              <tspan x="154" y="155"><%= details_autres_6_mois_split[2] %></tspan>
            </text>
            <% } else { %>
            <text class="description">
              <tspan x="154" y="65"><%= unavailable_autres_6_mois_split[0] %></tspan>
              <tspan x="154" y="85"><%= unavailable_autres_6_mois_split[1] %></tspan>
              <tspan x="154" y="105"><%= unavailable_autres_6_mois_split[2] %></tspan>
            </text>
            <% }%>
          </svg>
        </g>
        <% } else { %>
        <g class="filiere">
          <text>
            <tspan x="0" y="15"><%= filiereApprentissageDesc %></tspan>
          </text>
        </g>
        <g class="block">
          <svg x="0" y="25" class="block">
            <rect width="308" height="170" />
            <text class="description">
              <tspan x="154" y="65"><%= unavailableApprentissage.substr(0, 30) %></tspan>
              <tspan x="154" y="85"><%= unavailableApprentissage.substr(30, 26) %></tspan>
              <tspan x="154" y="105"><%= unavailableApprentissage.substr(56) %></tspan>
            </text>
          </svg>
        </g>
        <% } %>
      </svg>
      <% } %>

      <text class="about">
        <tspan x="0" y="575">
          <%= about %>
        </tspan>
      </text>
    </svg>
  </g>
</svg>