<%- await include('variables'); %>
<%_
deltaHeight=55
blocksHeight = (nbIndicateurPro + nbIndicateurApprentissage) * deltaHeight
height=region ? 325 + blocksHeight : 290 + blocksHeight
height = nbIndicateurPro == 0 || nbIndicateurApprentissage == 0 ? height - 80 : height;
aboutPosY = region ? height - 175 : height - 140;
currentHeight = 58
-%>
<svg version="1.1" width="720" height="<%= height %>" viewBox="0 0 720 <%= height %>" fill="none" style="background-color:white" xmlns="http://www.w3.org/2000/svg">
  <%- await include('../common/description'); %>
  <%- await include('common'); %>

  <g class="blockTitle">


    <g class="content">
      <rect x="0" y="62" class="border" width="699" height="<%= height - 64 %>" />
      <svg y="80" x="20">
        <g class="blocks">
          <svg <% if (region) { %>y="30" <% } %>>
            <% if (nbIndicateurPro > 0 ) { %>
            <g class="blockFiliere">
              <svg x="10">
                <rect x="0" y="0" class="borderFiliere" width="639" height="<%= deltaHeight + nbIndicateurPro * deltaHeight %>"></rect>
                <rect x="0" y="0" class="borderTopFiliere" width="640" height="4"></rect>
                <g class="filiere">
                  <text>
                    <tspan x="10" y="35"><%= filiereProDesc %></tspan>
                  </text>
                </g>
                <g class=" block">
                  <% if (stats?.pro?.taux_en_emploi_6_mois) { %>
                  <svg x="10" y="<%= currentHeight %>" class="block">
                    <rect width="60" height="35" />

                    <text class="number">
                      <tspan x="30" y="26"><%= stats?.pro?.taux_en_emploi_6_mois?.valeur %>%</tspan>
                    </text>
                    <text class="description">
                      <tspan x="75" y="14"><%= description_en_emploi_6_mois %></tspan>
                    </text>
                    <text class="details">
                      <tspan x="75" y="30"><%= details_en_emploi_6_mois[0] %> <%= details_en_emploi_6_mois[1] %></tspan>
                    </text>
                  </svg>
                  <% currentHeight = currentHeight + deltaHeight %>
                  <% } %>

                  <% if (stats?.pro?.taux_en_formation) { %>
                  <svg x="10" y="<%= currentHeight %>" class="block">
                    <rect width="60" height="35" />

                    <text class="number">
                      <tspan x="30" y="26"><%= stats?.pro?.taux_en_formation?.valeur %>%</tspan>
                    </text>
                    <text class="description">
                      <tspan x="75" y="14"><%= description_en_formation %></tspan>
                    </text>
                    <text class="details">
                      <tspan x="75" y="30"><%= details_en_formation[0] %> <%= details_en_formation[1] %></tspan>
                    </text>
                  </svg>
                  <% currentHeight = currentHeight + deltaHeight %>
                  <% } %>


                  <% if (stats?.pro?.taux_autres_6_mois) { %>
                  <svg x="10" y="<%= currentHeight %>" class="block">
                    <rect width="60" height="35" />
                    <text class="number">
                      <tspan x="30" y="26"><%= stats?.pro?.taux_autres_6_mois?.valeur %>%</tspan>
                    </text>
                    <text class="description">
                      <tspan x="75" y="14"><%= description_autres_6_mois %></tspan>
                    </text>
                    <text class="details">
                      <tspan x="75" y="30"><%= details_autres_6_mois[0] %> <%= details_autres_6_mois[1] %> <%= details_autres_6_mois[2] %></tspan>
                    </text>
                  </svg>
                  <% currentHeight = currentHeight + deltaHeight %>
                  <% } %>
                </g>
              </svg>
            </g>
            <% } %>

            <% if (nbIndicateurApprentissage > 0 ) { %>
            <g class="blockFiliere">
              <% currentHeight = 58 %>
              <svg x="10" y="<%= 80 + nbIndicateurPro * deltaHeight %>">
                <rect x="0" y="0" class="borderFiliere" width="639" height="<%= deltaHeight + nbIndicateurPro * deltaHeight %>"></rect>
                <rect x="0" y="0" class="borderTopFiliere" width="640" height="4"></rect>
                <g class="filiere">
                  <text>
                    <tspan x="10" y="35"><%= filiereApprentissageDesc %></tspan>
                  </text>
                </g>
                <g class=" block">
                  <% if (stats?.apprentissage?.taux_en_emploi_6_mois) { %>
                  <svg x="10" y="<%= currentHeight %>" class="block">
                    <rect width="60" height="35" />

                    <text class="number">
                      <tspan x="30" y="26"><%= stats?.apprentissage?.taux_en_emploi_6_mois?.valeur %>%</tspan>
                    </text>
                    <text class="description">
                      <tspan x="75" y="14"><%= description_en_emploi_6_mois %></tspan>
                    </text>
                    <text class="details">
                      <tspan x="75" y="30"><%= details_en_emploi_6_mois[0] %> <%= details_en_emploi_6_mois[1] %></tspan>
                    </text>
                  </svg>
                  <% currentHeight = currentHeight + deltaHeight %>
                  <% } %>

                  <% if (stats?.apprentissage?.taux_en_formation) { %>
                  <svg x="10" y="<%= currentHeight %>" class="block">
                    <rect width="60" height="35" />

                    <text class="number">
                      <tspan x="30" y="26"><%= stats?.apprentissage?.taux_en_formation?.valeur %>%</tspan>
                    </text>
                    <text class="description">
                      <tspan x="75" y="14"><%= description_en_formation %></tspan>
                    </text>
                    <text class="details">
                      <tspan x="75" y="30"><%= details_en_formation[0] %> <%= details_en_formation[1] %></tspan>
                    </text>
                  </svg>
                  <% currentHeight = currentHeight + deltaHeight %>
                  <% } %>


                  <% if (stats?.apprentissage?.taux_autres_6_mois) { %>
                  <svg x="10" y="<%= currentHeight %>" class="block">
                    <rect width="60" height="35" />
                    <text class="number">
                      <tspan x="30" y="26"><%= stats?.apprentissage?.taux_autres_6_mois?.valeur %>%</tspan>
                    </text>
                    <text class="description">
                      <tspan x="75" y="14"><%= description_autres_6_mois %></tspan>
                    </text>
                    <text class="details">
                      <tspan x="75" y="30"><%= details_autres_6_mois[0] %> <%= details_autres_6_mois[1] %> <%= details_autres_6_mois[2] %></tspan>
                    </text>
                  </svg>
                  <% currentHeight = currentHeight + deltaHeight %>
                  <% } %>
                </g>
              </svg>
            </g>
            <% } %>

            <text class="about">
              <tspan x="10" y="<%= aboutPosY + 14 %>">
                <%= about_short[0] %>
              </tspan>
              <tspan x="10" y="<%= aboutPosY + 30 %>">
                <%= about_short[1] %>
              </tspan>
            </text>
          </svg>
        </g>
      </svg>
    </g>

    <g class=" mainTitle">
      <svg>
        <rect width="700" height="<%= region ? 93 : 64 %>" />
        <text>
          <tspan x="30" y="40"><%= title.join(' ') %></tspan>
          <% if (region) { %>
          <tspan x="30" y="70" class="region"><%= regionDesc[0] %> <%= regionDesc[1] %></tspan>
          <% } %>
        </text>
      </svg>
    </g>
  </g>
</svg>