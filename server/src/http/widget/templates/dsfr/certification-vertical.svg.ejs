<%- await include('variables'); %>
<%_
deltaHeight=75
height=region ? 210 + nbIndicateur * deltaHeight : 195 + nbIndicateur * deltaHeight 
currentHeight = region ? 30 : 30
-%>
<svg version="1.1" width="320" height="<%= height %>" viewBox="0 0 320 <%= height %>" fill="none" style="background-color:white" xmlns="http://www.w3.org/2000/svg">
  <%- await include('../common/description'); %>
  <%- await include('common'); %>

  <g class="blockTitle">

    <g class="content">
      <rect x="0" y="62" class="border" width="319" height="<%= height - 64 %>" />
      <svg y="110" x="20">
        <g class="blocks">
          <svg y="<%= region ? 30 : 10 %>">
            <g class="block">

              <svg x="0" y="<%= currentHeight %>" class="block">
                <rect width="60" height="35" />
                <% if (stats?.taux_en_emploi_6_mois) { %>
                <text class="number">
                  <tspan x="30" y="26"><%= stats?.taux_en_emploi_6_mois?.valeur %>%</tspan>
                </text>
                <text class="description">
                  <tspan x="75" y="14"><%= description_en_emploi_6_mois_split[0] %></tspan>
                  <tspan x="75" y="32"><%= description_en_emploi_6_mois_split[1] %></tspan>
                </text>
                <text class="details">
                  <tspan x="75" y="46"><%= details_en_emploi_6_mois %></tspan>
                </text>

                <% } else { %>
                <text class="number">
                  <tspan x="30" y="26">--</tspan>
                </text>
                <text class="descriptionSmall">
                  <tspan x="75" y="12"><%= unavailable_en_emploi_6_mois.substr(0, 32) %></tspan>
                </text>
                <text class="descriptionSmall">
                  <tspan x="75" y="26"><%= unavailable_en_emploi_6_mois.substr(32, 38) %></tspan>
                </text>
                <text class="descriptionSmall">
                  <tspan x="75" y="40"><%= unavailable_en_emploi_6_mois.substr(70) %></tspan>
                </text>
                <% } %>
              </svg>
              <% currentHeight = currentHeight + deltaHeight %>


              <svg x="0" y="<%= currentHeight %>" class="block">
                <rect width="60" height="35" />
                <% if (stats?.taux_en_formation) { %>
                <text class="number">
                  <tspan x="30" y="26"><%= stats?.taux_en_formation?.valeur %>%</tspan>
                </text>
                <text class="description">
                  <tspan x="75" y="14"><%= description_en_formation %></tspan>
                </text>
                <text class="details">
                  <tspan x="75" y="30"><%= details_en_formation[0] %></tspan>
                  <tspan x="75" y="44"><%= details_en_formation[1] %></tspan>
                </text>
                <% } else { %>
                <text class="number">
                  <tspan x="30" y="26">--</tspan>
                </text>
                <text class="descriptionSmall">
                  <tspan x="75" y="12"><%= unavailable_en_formation.substr(0, 32) %></tspan>
                </text>
                <text class="descriptionSmall">
                  <tspan x="75" y="26"><%= unavailable_en_formation.substr(32, 37) %></tspan>
                </text>
                <text class="descriptionSmall">
                  <tspan x="75" y="40"><%= unavailable_en_formation.substr(69) %></tspan>
                </text>
                <% } %>
              </svg>
              <% currentHeight = currentHeight + deltaHeight %>



              <svg x="0" y="<%= currentHeight %>" class="block">
                <rect width="60" height="35" />
                <% if (stats?.taux_autres_6_mois) { %>
                <text class="number">
                  <tspan x="30" y="26"><%= stats?.taux_autres_6_mois?.valeur %>%</tspan>
                </text>
                <text class="description">
                  <tspan x="75" y="14"><%= description_autres_6_mois %></tspan>
                </text>
                <text class="details">
                  <tspan x="75" y="30"><%= details_autres_6_mois_split[0] %></tspan>
                  <tspan x="75" y="44"><%= details_autres_6_mois_split[1] %></tspan>
                </text>
                <% } else { %>
                <text class="number">
                  <tspan x="30" y="26">--</tspan>
                </text>
                <text class="descriptionSmall">
                  <tspan x="75" y="12"><%= unavailable_autres_6_mois.substr(0, 32) %></tspan>
                </text>
                <text class="descriptionSmall">
                  <tspan x="75" y="26"><%= unavailable_autres_6_mois.substr(32, 37) %></tspan>
                </text>
                <text class="descriptionSmall">
                  <tspan x="75" y="40"><%= unavailable_autres_6_mois.substr(69) %></tspan>
                </text>
                <% } %>
              </svg>
              <% currentHeight = currentHeight + deltaHeight %>
            </g>

            <text class="about">
              <tspan x="0" y="<%= currentHeight + 14 %>">
                <%= about_short[0] %>
              </tspan>
              <tspan x="0" y="<%= currentHeight + 30 %>">
                <%= about_short[1] %>
              </tspan>
            </text>
          </svg>
        </g>
      </svg>
    </g>

    <g class=" mainTitle">
      <svg>
        <rect width="700" height="<%= region ? 140 : 120 %>" />
        <text>
          <tspan x="30" y="30"><%= title[0] %></tspan>
          <tspan x="30" y="54"><%= title[1] %></tspan>
          <tspan x="30" y="78"><%= title[2] %></tspan>
          <% if (region) { %>
          <tspan x="30" y="104" class="region"><%= regionDesc[0] %></tspan>
          <tspan x="30" y="124" class="region"><%= regionDesc[1] %></tspan>
          <% } else { %>
          <tspan x="30" y="104" class="region"><%= detailVueNationale %></tspan>
          <% } %>
        </text>
      </svg>
    </g>
  </g>
</svg>